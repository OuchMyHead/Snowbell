(function(a){a.fn.autogrow=function(b){return this.filter("textarea").each(function(){var b=this;var c=a(b);var d=c.height();var e=c.hasClass("autogrow-short")?0:parseInt(c.css("lineHeight"));var f=a("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:c.width(),fontSize:c.css("fontSize"),fontFamily:c.css("fontFamily"),fontWeight:c.css("fontWeight"),lineHeight:c.css("lineHeight"),resize:"none"}).appendTo(document.body);var g=function(){var a=function(a,b){for(var c=0,d="";c<b;c++)d+=a;return d};var g=b.value.replace(/</g,"<").replace(/>/g,">").replace(/&/g,"&").replace(/\n$/,"<br/> ").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(b){return a(" ",b.length-1)+" "});f.css("width",c.width());f.html(g);c.css("height",Math.max(f.height()+e,d))};c.change(g).keyup(g).keydown(g);a(window).resize(g);g()})}})(jQuery)